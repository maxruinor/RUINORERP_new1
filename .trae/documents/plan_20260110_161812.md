# 在SqlSugar查询中添加WITH(NOLOCK)提升并发性能

## 问题分析
- 项目使用SqlSugar作为ORM框架
- 业务层(BaseControllerGeneric.cs)中的BaseGetQueryableAsync方法是所有查询的基础
- 默认情况下，SqlSugar查询不使用WITH(NOLOCK)提示
- 这在高并发场景下可能导致查询性能问题

## 修复方案
1. **修改业务层基础查询方法**：在BaseControllerGeneric.cs的BaseGetQueryableAsync方法中添加With(SqlWith.NoLock)提示
2. **确保所有查询都继承该设置**：由于所有查询都通过BaseGetQueryableAsync方法获取查询对象，因此这个修改将影响所有查询
3. **不影响修改操作**：WITH(NOLOCK)只应用于查询操作，不会影响插入、更新和删除操作

## 修复步骤
1. 打开`e:\CodeRepository\SynologyDrive\RUINORERP\RUINORERP.Business\BaseControllerGeneric.cs`文件
2. 定位到第452-456行的BaseGetQueryableAsync方法
3. 修改该方法，在Queryable<T>()后添加.With(SqlWith.NoLock)
4. 保存文件
5. 编译项目，验证修复是否成功

## 预期结果
- 所有通过BaseGetQueryableAsync方法获取的查询都将自动包含WITH(NOLOCK)提示
- 提升高并发场景下的查询性能
- 减少查询对数据库的锁竞争
- 不影响数据修改操作的正确性

## 代码修改示例
```csharp
public virtual ISugarQueryable<T> BaseGetQueryableAsync()
{
    return _unitOfWorkManage.GetDbClient().Queryable<T>().With(SqlWith.NoLock);
}
```