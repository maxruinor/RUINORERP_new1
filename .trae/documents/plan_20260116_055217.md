# 修复SqlsugarSetup.cs中的Log4NetProviderByCustomeDb引用错误

## 问题分析

在RUINORERP.Extensions项目的SqlsugarSetup.cs文件中，第67行出现了CS0246错误，提示"未能找到类型或命名空间名'Log4NetProviderByCustomeDb'"。这是因为项目正在进行log4net日志系统重构，旧的Log4NetProviderByCustomeDb类已经被删除或重命名，而SqlsugarSetup.cs文件仍然在引用它。

## 修复计划

### 1. 修改SqlsugarSetup.cs文件

#### 1.1 替换Log4NetProviderByCustomeDb引用
- **修改文件**：`RUINORERP.Extensions\ServiceExtensions\SqlsugarSetup.cs`
- **实现内容**：
  - 将对`Log4NetProviderByCustomeDb`的引用替换为使用Microsoft.Extensions.Logging的默认实现
  - 移除对旧日志系统的直接依赖
  - 使用`LoggerFactory`创建日志记录器

#### 1.2 修改AddSqlsugarSetup方法
- **修改文件**：`RUINORERP.Extensions\ServiceExtensions\SqlsugarSetup.cs`
- **实现内容**：
  - 修改第一个AddSqlsugarSetup重载方法，移除Log4NetProviderByCustomeDb的使用
  - 使用LoggerFactory.Create创建日志记录器
  - 确保日志记录功能正常工作

#### 1.3 保留第二个AddSqlsugarSetup重载方法
- **修改文件**：`RUINORERP.Extensions\ServiceExtensions\SqlsugarSetup.cs`
- **实现内容**：
  - 保持不变，因为它已经没有使用logger参数

### 2. 确保日志记录功能正常
- **修改内容**：
  - 确保ConfigureDbAop方法中的日志记录逻辑能够处理logger为null的情况
  - 保持现有的调试输出功能，确保在没有logger时仍能记录日志

### 3. 验证修复效果
- **验证内容**：
  - 确保SqlsugarSetup.cs能够正常编译
  - 确保SQL执行日志能够正常记录
  - 确保数据库AOP事件能够正常触发

## 预期效果

1. SqlsugarSetup.cs文件能够正常编译，不再出现CS0246错误
2. SQL执行日志能够正常记录，无论是使用logger还是调试输出
3. 数据库AOP事件能够正常触发，包括SQL执行前、执行错误和执行后事件
4. 代码与重构后的日志系统兼容，不再依赖旧的Log4NetProviderByCustomeDb类

## 技术说明

根据提供的技术文档，重构后的日志系统使用了新的类和配置方式：
- Log4NetProvider 替代了 Log4NetProviderByCustomeDb
- Log4NetConfiguration 用于初始化日志系统
- 使用Microsoft.Extensions.Logging的标准接口

由于SqlsugarSetup.cs是一个扩展类，可能会在不同的上下文中被调用，因此我们选择使用LoggerFactory.Create来创建日志记录器，这样可以确保在各种情况下都能正常工作，而不依赖于特定的日志系统实现。