## 过滤已审核通过的销售出库单

**问题**：当前代码在查询销售订单时，加载了所有相关的销售出库单，但没有过滤掉未审核通过的记录。

**解决方案**：在内存中过滤销售出库单，只保留审核通过的记录。

**修复步骤**：
1. 在处理销售出库单数据时（第213行），添加过滤条件
2. 在计算已发货数量时（第244行），添加过滤条件

**修复代码**：
1. 将第213行的代码从
   ```csharp
   List<tb_SaleOut> SaleOutList = SaleOrder.tb_SaleOuts;
   ```
   修改为
   ```csharp
   List<tb_SaleOut> SaleOutList = SaleOrder.tb_SaleOuts.Where(c => c.ApprovalStatus.HasValue && c.ApprovalStatus == (int)ApprovalStatus.审核通过).ToList();
   ```

2. 将第244行的代码从
   ```csharp
   item.Cells[3].Value = SaleOrder.tb_SaleOuts.Sum(c => c.TotalQty);
   ```
   修改为
   ```csharp
   item.Cells[3].Value = SaleOrder.tb_SaleOuts.Where(c => c.ApprovalStatus.HasValue && c.ApprovalStatus == (int)ApprovalStatus.审核通过).Sum(c => c.TotalQty);
   ```

**预期效果**：
- 只显示已审核通过的销售出库单
- 已发货数量只统计已审核通过的销售出库单
- 保持原有业务逻辑不变
- 提高数据准确性

**注意事项**：
- 假设审核通过的状态值与销售订单相同，即`(int)ApprovalStatus.审核通过`
- 如果审核状态值不同，需要根据实际情况调整过滤条件
- 此方案在内存中过滤数据，适用于数据量不大的情况