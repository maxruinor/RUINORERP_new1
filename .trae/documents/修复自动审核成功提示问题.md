## 问题分析

1. **核心问题**：在提交单据时，即使自动审核失败，系统也会显示"审核成功"的提示

2. **代码流程**：
   - `Submit()` 方法执行提交逻辑，包括自动审核
   - 无论自动审核结果如何，`submitrs` 变量始终被设置为 `true`
   - 调用者根据 `submitrs` 结果判断是否显示成功信息

3. **关键代码位置**：
   - `Submit()` 方法：`e:\CodeRepository\SynologyDrive\RUINORERP\RUINORERP.UI\BaseForm\BaseBillEditGeneric.cs:5457-5664`
   - 自动审核逻辑：`5526-5624` 行
   - 提交成功后的处理：`2250-2262` 行

4. **根本原因**：
   - 自动审核失败时，代码执行了撤销操作并记录错误日志，但没有将 `submitrs` 设置为 `false`
   - 导致调用者认为提交和审核都成功了

## 修复方案

1. **优化自动审核逻辑**：
   - 修改 `Submit()` 方法，将自动审核结果与 `submitrs` 变量关联
   - 当自动审核失败时，根据实际情况决定是否将 `submitrs` 设置为 `false`

2. **具体修改点**：
   - 在销售订单自动审核逻辑中（`5534-5577` 行），添加审核结果判断
   - 在采购订单自动审核逻辑中（`5579-5624` 行），添加审核结果判断
   - 确保只有当所有审核逻辑都成功执行时，`submitrs` 才为 `true`

3. **修复后效果**：
   - 当自动审核成功时，显示"审核成功"提示
   - 当自动审核失败时，显示"提交成功，但自动审核失败"提示或其他适当的错误信息
   - 用户能准确了解提交和审核的实际结果

## 代码修改计划

1. 修改 `Submit()` 方法，添加自动审核结果跟踪变量
2. 在自动审核失败时，更新跟踪变量
3. 根据跟踪变量的值，决定 `submitrs` 的最终值
4. 在调用者处添加适当的错误处理和提示

## 预期结果

- 提交成功且自动审核成功：显示"审核成功"
- 提交成功但自动审核失败：显示"提交成功，但自动审核失败"
- 提交失败：显示"提交失败"

这样可以确保用户获得准确的操作结果反馈，避免误导用户。