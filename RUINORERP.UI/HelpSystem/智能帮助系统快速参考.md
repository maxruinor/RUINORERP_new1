# æ™ºèƒ½å¸®åŠ©ç³»ç»Ÿå¿«é€Ÿå‚è€ƒ

## ä¸€åˆ†é’Ÿå¿«é€Ÿä¸Šæ‰‹

### âœ… ä½ éœ€è¦åšçš„

1. **æŒ‰è§„èŒƒå‘½åæ§ä»¶** - ä½¿ç”¨æ ‡å‡†å‰ç¼€
   ```csharp
   cmbCustomerVendor_ID  // æ­£ç¡® âœ“
   txtTotalCost          // æ­£ç¡® âœ“
   ```

2. **ç¼–å†™å¸®åŠ©æ–‡ä»¶** - æŒ‰å¯¹åº”è·¯å¾„åˆ›å»º
   ```
   HelpContent/Fields/tb_SaleOrder/CustomerVendor_ID.md
   ```

3. **å®Œæˆ** - ç³»ç»Ÿè‡ªåŠ¨åŒ¹é…ï¼Œæ— éœ€ä»»ä½•ä»£ç ï¼

---

### âŒ ä½ ä¸éœ€è¦åšçš„

- ~~ç¼–å†™ä»£ç æ‰‹åŠ¨æŒ‡å®šHelpKey~~
- ~~ä¸ºæ¯ä¸ªæ§ä»¶æ³¨å†Œå¸®åŠ©äº‹ä»¶~~
- ~~ç»´æŠ¤å¤æ‚çš„å¸®åŠ©æ˜ å°„è¡¨~~
- ~~æ‹…å¿ƒæ§ä»¶å˜æ›´æ—¶å¸®åŠ©å¤±æ•ˆ~~

---

## æ§ä»¶å‘½åè§„èŒƒé€ŸæŸ¥è¡¨

| å‰ç¼€ | æ§ä»¶ç±»å‹ | ç¤ºä¾‹ | å¸®åŠ©é”® |
|------|---------|------|--------|
| `cmb` | ComboBox | `cmbCustomerVendor_ID` | `Fields.tb_SaleOrder.CustomerVendor_ID` |
| `txt` | TextBox | `txtTotalCost` | `Fields.tb_SaleOrder.TotalCost` |
| `lbl` | Label | `lblCustomerVendor_ID` | `Fields.tb_SaleOrder.CustomerVendor_ID` |
| `dtp` | DateTimePicker | `dtpOrderDate` | `Fields.tb_SaleOrder.OrderDate` |
| `chk` | CheckBox | `chkIsCustomizedOrder` | `Fields.tb_SaleOrder.IsCustomizedOrder` |
| `num` | NumericUpDown | `numTotalAmount` | `Fields.tb_SaleOrder.TotalAmount` |

---

## å¸®åŠ©æ–‡ä»¶è·¯å¾„é€ŸæŸ¥è¡¨

| å¸®åŠ©çº§åˆ« | æ–‡ä»¶è·¯å¾„ | ç¤ºä¾‹ |
|---------|---------|------|
| **å­—æ®µçº§** | `HelpContent/Fields/å®ä½“å/å­—æ®µå.md` | `HelpContent/Fields/tb_SaleOrder/CustomerVendor_ID.md` |
| **æ§ä»¶çº§** | `HelpContent/Controls/çª—ä½“å/æ§ä»¶å.md` | `HelpContent/Controls/UCSaleOrder/cmbCustomerVendor_ID.md` |
| **çª—ä½“çº§** | `HelpContent/Forms/çª—ä½“å.md` | `HelpContent/Forms/UCSaleOrder.md` |
| **æ¨¡å—çº§** | `HelpContent/Modules/æ¨¡å—å.md` | `HelpContent/Modules/SalesManagement.md` |

---

## å¸¸è§åœºæ™¯ç¤ºä¾‹

### åœºæ™¯1ï¼šä¸ºé”€å”®è®¢å•çš„å®¢æˆ·å­—æ®µæ·»åŠ å¸®åŠ©

**ç¬¬1æ­¥ï¼šç¡®è®¤æ§ä»¶å‘½å**
```csharp
// UCSaleOrder.Designer.cs
this.cmbCustomerVendor_ID.Name = "cmbCustomerVendor_ID";  // âœ“ ç¬¦åˆè§„èŒƒ
```

**ç¬¬2æ­¥ï¼šåˆ›å»ºå¸®åŠ©æ–‡ä»¶**
```markdown
# HelpContent/Fields/tb_SaleOrder/CustomerVendor_ID.md

# å®¢æˆ·

## ä¸šåŠ¡æ„ä¹‰
å®¢æˆ·å­—æ®µæ˜¯é”€å”®è®¢å•çš„æ ¸å¿ƒå…³è”å­—æ®µ...

## ä½¿ç”¨è¯´æ˜
1. ç‚¹å‡»å®¢æˆ·ä¸‹æ‹‰æ¡†
2. æœç´¢å®¢æˆ·
3. é€‰ä¸­ç›®æ ‡å®¢æˆ·

## é‡è¦æç¤º
- æ£€æŸ¥å®¢æˆ·ä¿¡ç”¨é¢åº¦
- åº”ç”¨å®¢æˆ·ä¸“å±ä»·æ ¼
```

**ç¬¬3æ­¥ï¼šæµ‹è¯•**
- æŒ‰ `F1` åœ¨ `cmbCustomerVendor_ID` æ§ä»¶ä¸Š
- æŸ¥çœ‹å¸®åŠ©å†…å®¹ âœ“

---

### åœºæ™¯2ï¼šä¸ºæ–°çª—ä½“æ·»åŠ å¸®åŠ©

**ç¬¬1æ­¥ï¼šç¡®ä¿çª—ä½“ç»§æ‰¿è‡ªæ³›å‹åŸºç±»**
```csharp
public partial class UCPurchaseOrder : BaseBillEditGeneric<tb_PurchaseOrder, tb_PurchaseOrderDetail>
{
    // âœ“ è‡ªåŠ¨è§£æå®ä½“ç±»å‹ä¸º tb_PurchaseOrder
}
```

**ç¬¬2æ­¥ï¼šä¸ºå…³é”®å­—æ®µåˆ›å»ºå¸®åŠ©**
```
HelpContent/Fields/tb_PurchaseOrder/
â”œâ”€â”€ Supplier_ID.md
â”œâ”€â”€ OrderDate.md
â””â”€â”€ TotalAmount.md
```

**ç¬¬3æ­¥ï¼šå®Œæˆï¼**
- æ‰€æœ‰ç¬¦åˆå‘½åè§„èŒƒçš„æ§ä»¶è‡ªåŠ¨åŒ¹é…å¸®åŠ© âœ“

---

## å¸®åŠ©é”®ç”Ÿæˆè§„åˆ™

### è‡ªåŠ¨ç”Ÿæˆè§„åˆ™

```
æ§ä»¶å: cmbCustomerVendor_ID
çª—ä½“: UCSaleOrder (ç»§æ‰¿ BaseBillEditGeneric<tb_SaleOrder, C>)
        â†“
æå–æ³›å‹ â†’ tb_SaleOrder
æå–å­—æ®µ â†’ CustomerVendor_ID
        â†“
ç”Ÿæˆå¸®åŠ©é”® â†’ Fields.tb_SaleOrder.CustomerVendor_ID
        â†“
æŸ¥æ‰¾å¸®åŠ© â†’ HelpContent/Fields/tb_SaleOrder/CustomerVendor_ID.md
```

### å¸®åŠ©é”®ä¼˜å…ˆçº§

| ä¼˜å…ˆçº§ | å¸®åŠ©é”® | æ¥æº |
|-------|--------|------|
| 1 | `Fields.å®ä½“å.å­—æ®µå` | ä»æ³›å‹å’Œæ§ä»¶åæ™ºèƒ½è§£æ |
| 2 | `Controls.çª—ä½“å.æ§ä»¶å` | æ§ä»¶åä½œä¸ºå¤‡ç”¨ |
| 3 | `Forms.çª—ä½“å` | çª—ä½“å¸®åŠ©ä½œä¸ºå…œåº• |

---

## è°ƒè¯•æŠ€å·§

### 1. æŸ¥çœ‹è°ƒè¯•è¾“å‡º

å¯ç”¨æ§åˆ¶å°æ—¥å¿—ï¼š
```csharp
System.Diagnostics.Debug.Listeners.Add(
    new System.Diagnostics.ConsoleTraceListener());
```

æŸ¥çœ‹è¾“å‡ºï¼š
```
ä»æ§ä»¶åæ™ºèƒ½åŒ¹é…: Fields.tb_SaleOrder.CustomerVendor_ID
ä»çª—ä½“ UCSaleOrder è§£æå‡ºå®ä½“ç±»å‹: tb_SaleOrder
```

### 2. æµ‹è¯•è§£æå™¨

```csharp
var resolver = new SmartHelpResolver();

// æå–å­—æ®µå
string fieldName = resolver.ExtractFieldNameFromControlName("cmbCustomerVendor_ID");
// ç»“æœ: "CustomerVendor_ID"

// è§£æå®ä½“ç±»å‹
Type entityType = resolver.ResolveEntityType(typeof(UCSaleOrder));
// ç»“æœ: typeof(tb_SaleOrder)

// è§£æå¸®åŠ©é”®
List<string> helpKeys = resolver.ResolveHelpKeys(cmbCustomerVendor_ID);
// ç»“æœ: ["Fields.tb_SaleOrder.CustomerVendor_ID", ...]
```

### 3. æŸ¥çœ‹ç¼“å­˜ç»Ÿè®¡

```csharp
var resolver = new SmartHelpResolver();
Console.WriteLine(resolver.GetCacheStatistics());

// è¾“å‡º:
// SmartHelpResolver ç¼“å­˜ç»Ÿè®¡:
//   - å®ä½“ç±»å‹ç¼“å­˜: 15
//   - å®ä½“å±æ€§ç¼“å­˜: 15
```

---

## å¸¸è§é—®é¢˜å¿«é€Ÿè§£å†³

### Q: æ§ä»¶æ²¡æœ‰æ˜¾ç¤ºå¸®åŠ©ï¼Ÿ

**æ£€æŸ¥æ¸…å•ï¼š**
1. âœ“ æ§ä»¶åæ˜¯å¦ç¬¦åˆå‘½åè§„èŒƒï¼Ÿï¼ˆå‰ç¼€ + å­—æ®µåï¼‰
2. âœ“ å¸®åŠ©æ–‡ä»¶æ˜¯å¦å­˜åœ¨äºæ­£ç¡®è·¯å¾„ï¼Ÿ
3. âœ“ çª—ä½“æ˜¯å¦ç»§æ‰¿è‡ª `BaseBillEditGeneric<T, C>`ï¼Ÿ
4. âœ“ å­—æ®µæ˜¯å¦å­˜åœ¨äºå®ä½“ä¸­ï¼Ÿ

**å¿«é€Ÿæµ‹è¯•ï¼š**
```csharp
// ä¸´æ—¶æ‰‹åŠ¨æŒ‡å®šHelpKeyæµ‹è¯•
control.Tag = "HelpKey:Test.Help";
// å¦‚æœèƒ½æ˜¾ç¤ºï¼Œè¯´æ˜å¸®åŠ©ç³»ç»Ÿæ­£å¸¸ï¼Œé—®é¢˜åœ¨äºè‡ªåŠ¨åŒ¹é…
```

---

### Q: æƒ³ä¸ºåŒä¸€ä¸ªæ§ä»¶æä¾›å¤šä¸ªå¸®åŠ©ï¼Ÿ

**æ–¹æ¡ˆ1ï¼šæŒ‰ä¸Šä¸‹æ–‡åŒºåˆ†**
```csharp
HelpContent/Fields/tb_SaleOrder/
â”œâ”€â”€ CustomerVendor_ID_NewOrder.md
â””â”€â”€ CustomerVendor_ID_ModifyOrder.md
```

**æ–¹æ¡ˆ2ï¼šä½¿ç”¨ManualHelpKey**
```csharp
control.Tag = "HelpKey:Custom.Scenario.Help";
```

---

### Q: å¦‚ä½•å¤„ç†ä¸ç¬¦åˆå‘½åè§„èŒƒçš„æ—§æ§ä»¶ï¼Ÿ

**æ–¹æ¡ˆ1ï¼šé‡å‘½åæ§ä»¶**ï¼ˆæ¨èï¼‰
```csharp
// æ—§: cmbCustID
// æ–°: cmbCustomerVendor_ID
```

**æ–¹æ¡ˆ2ï¼šæ‰‹åŠ¨æŒ‡å®šHelpKey**
```csharp
cmbCustID.Tag = "HelpKey:Fields.tb_SaleOrder.CustomerVendor_ID";
```

**æ–¹æ¡ˆ3ï¼šæ·»åŠ åˆ«åæ˜ å°„**ï¼ˆé«˜çº§ï¼‰
```csharp
// åœ¨SmartHelpResolverä¸­æ·»åŠ åˆ«åæ˜ å°„
private static readonly Dictionary<string, string> ControlAliases = new Dictionary<string, string>
{
    { "cmbCustID", "CustomerVendor_ID" },
    { "txtAmt", "TotalAmount" }
};
```

---

## æœ€ä½³å®è·µæ¸…å•

### âœ… DO - æ¨èåšæ³•

- âœ“ ä½¿ç”¨å®Œæ•´çš„å­—æ®µåï¼ˆ`CustomerVendor_ID`ï¼‰
- âœ“ æŒ‰ä¸šåŠ¡æ¨¡å—ç»„ç»‡å¸®åŠ©æ–‡ä»¶
- âœ“ ç¼–å†™é¢å‘ä¸šåŠ¡è€ŒéæŠ€æœ¯çš„å¸®åŠ©å†…å®¹
- âœ“ ä¿æŒå¸®åŠ©å†…å®¹ä¸ç³»ç»ŸåŠŸèƒ½åŒæ­¥æ›´æ–°
- âœ“ ä½¿ç”¨æ ‡é¢˜ã€åˆ—è¡¨ã€è¡¨æ ¼ç»„ç»‡å†…å®¹

### âŒ DON'T - é¿å…åšæ³•

- âœ— è¿‡åº¦ç¼©å†™å­—æ®µåï¼ˆ`cmbCustID` â†’ `cmbCustomerVendor_ID`ï¼‰
- âœ— ä½¿ç”¨æ— æ„ä¹‰å‘½åï¼ˆ`txt123` â†’ `txtOrderDate`ï¼‰
- âœ— åœ¨å¸®åŠ©ä¸­æè¿°å®ç°ç»†èŠ‚
- âœ— ç¼–å†™è¿‡æ—¶æˆ–é”™è¯¯çš„å¸®åŠ©å†…å®¹
- âœ— å¿½ç•¥ç”¨æˆ·åé¦ˆ

---

## å¿«é€Ÿå‚è€ƒå¡ç‰‡

### æ™ºèƒ½åŒ¹é…æµç¨‹å›¾

```
ç”¨æˆ·æŒ‰F1
    â†“
SmartHelpResolverè§£æ
    â†“
ç”Ÿæˆå¸®åŠ©é”®åˆ—è¡¨ï¼ˆæŒ‰ä¼˜å…ˆçº§ï¼‰
    â†“
HelpManageræŸ¥æ‰¾å¸®åŠ©å†…å®¹
    â†“
æ˜¾ç¤ºç¬¬ä¸€ä¸ªæ‰¾åˆ°çš„å¸®åŠ©
    â†“
å¦‚æœéƒ½æœªæ‰¾åˆ° â†’ æ˜¾ç¤ºçª—ä½“çº§å¸®åŠ©
```

### æ§ä»¶å â†’ å¸®åŠ©é”® è½¬æ¢è¡¨

| æ§ä»¶å | å­—æ®µå | å®ä½“ç±»å‹ | å¸®åŠ©é”® |
|-------|-------|---------|--------|
| `cmbCustomerVendor_ID` | `CustomerVendor_ID` | `tb_SaleOrder` | `Fields.tb_SaleOrder.CustomerVendor_ID` |
| `txtTotalCost` | `TotalCost` | `tb_SaleOrder` | `Fields.tb_SaleOrder.TotalCost` |
| `dtpOrderDate` | `OrderDate` | `tb_SaleOrder` | `Fields.tb_SaleOrder.OrderDate` |
| `chkIsCustomizedOrder` | `IsCustomizedOrder` | `tb_SaleOrder` | `Fields.tb_SaleOrder.IsCustomizedOrder` |

### å¸®åŠ©æ–‡ä»¶ä½ç½®

```
HelpContent/
â”œâ”€â”€ Fields/
â”‚   â””â”€â”€ tb_SaleOrder/
â”‚       â”œâ”€â”€ CustomerVendor_ID.md  â† æœ€å¸¸ç”¨
â”‚       â”œâ”€â”€ TotalCost.md
â”‚       â””â”€â”€ OrderDate.md
â”œâ”€â”€ Forms/
â”‚   â””â”€â”€ UCSaleOrder.md           â† å…œåº•
â””â”€â”€ Modules/
    â””â”€â”€ SalesManagement.md       â† ä¸šåŠ¡å…¨æ™¯
```

---

## æŠ€æœ¯æ”¯æŒ

### æŸ¥çœ‹è¯¦ç»†æ–‡æ¡£

- `æ™ºèƒ½å¸®åŠ©ç³»ç»Ÿæ¶æ„è¯´æ˜.md` - å®Œæ•´æŠ€æœ¯æ–‡æ¡£
- `SmartHelpResolver.cs` - æ ¸å¿ƒè§£æå™¨æºç 
- `SmartHelpResolverTest.cs` - æµ‹è¯•æ¼”ç¤ºä»£ç 

### è”ç³»æ–¹å¼

- GitHub Issues: [é¡¹ç›®ä»“åº“Issuesé¡µé¢]
- é‚®ä»¶: [æ”¯æŒé‚®ç®±]

---

**è®°ä½ï¼šæ™ºèƒ½å¸®åŠ©ç³»ç»Ÿ = é›¶ä»£ç é…ç½® + è‡ªåŠ¨åŒ¹é…ï¼** ğŸ‰
