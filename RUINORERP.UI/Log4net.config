<?xml version="1.0" encoding="utf-8" ?>
<log4net>

	<!-- 设置 WorkflowCore 相关日志器的级别为 WARN 或更高 -->
	<logger name="WorkflowCore">
		<level value="WARN" />
	</logger>

	<!-- 或者更具体地针对 WorkflowHost -->
	<logger name="WorkflowCore.Services.WorkflowHost">
		<level value="WARN" />
	</logger>

	<!--日志级别:可选值: ERROR > WARN > INFO > DEBUG -->
	<root>
		<!-- 定义记录的日志级别-->
		<!--<level value="ERROR"/>
		<level value="WARN"/>-->
    <level value="INFO"/>
    <!--<level value="DEBUG"/>-->
		<appender-ref ref="ADONetAppender" />
		<!-- 记录到什么介质中-->
	</root>
	<!-- name属性指定其名称,type则是log4net.Appender命名空间的一个类的名称,意思是,指定使用哪种介质-->
	<!--<appender name="ADONetAppender" type="log4net.Appender.ADONetAppender">-->
	<appender name="ADONetAppender" type="RUINORERP.Common.Log4Net.CustomADONetAppender">
		<!--日志缓存写入条数 设置为0时只要有一条就立刻写到数据库-->
		<bufferSize value="0" />
		<!--日志数据库连接串-->
		<connectionType value="System.Data.SqlClient.SqlConnection, System.Data, Version=1.0.5000.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
		<connectionString value="${ConnectionString}" />
		<!--日志数据库脚本 - 适配Logs表结构-->
		<commandText value="INSERT INTO Logs ([Date],[Level],[Logger],[Message],[Exception],[Operator],[ModName],[Path],[ActionName],[IP],[MAC],[MachineName]) VALUES (@log_date, @log_level, @logger, @message, @exception, @operator, @modname, @path, @actionname, @ip, @mac, @machinename)" />

		<!--日志时间Date -->
		<parameter>
			<parameterName value="@log_date" />
			<dbType value="DateTime" />
			<layout type="log4net.Layout.RawTimeStampLayout" />
		</parameter>

		<!--日志类型Level -->
		<parameter>
			<parameterName value="@log_level" />
			<dbType value="String" />
			<size value="50" />
			<layout type="log4net.Layout.PatternLayout">
				<conversionPattern value="%p" />
			</layout>
		</parameter>

		<!--日志名称Logger -->
		<parameter>
			<parameterName value="@logger" />
			<dbType value="String" />
			<size value="500" />
			<layout type="log4net.Layout.PatternLayout">
				<conversionPattern value="%logger" />
			</layout>
		</parameter>

		<!--日志消息Message -->
		<parameter>
			<parameterName value="@message" />
			<dbType value="String" />
			<size value="-1" />
			<!-- 使用-1表示最大长度，适应text类型 -->
			<layout type="log4net.Layout.PatternLayout">
				<conversionPattern value="%message" />
			</layout>
		</parameter>

		<!--异常信息Exception -->
		<parameter>
			<parameterName value="@exception" />
			<dbType value="String" />
			<size value="-1" />
			<layout type="log4net.Layout.ExceptionLayout" />
		</parameter>

		<!--操作者Operator -->
		<parameter>
			<parameterName value="@operator" />
			<dbType value="String" />
			<size value="200" />
			<layout type="log4net.Layout.PatternLayout">
				<conversionPattern value="%property{Operator}" />
			</layout>
		</parameter>

		<!--模块名称ModName -->
		<parameter>
			<parameterName value="@modname" />
			<dbType value="String" />
			<size value="200" />
			<layout type="log4net.Layout.PatternLayout">
				<conversionPattern value="%property{ModName}" />
			</layout>
		</parameter>

		<!--路径Path -->
		<parameter>
			<parameterName value="@path" />
			<dbType value="String" />
			<size value="500" />
			<layout type="log4net.Layout.PatternLayout">
				<conversionPattern value="%property{Path}" />
			</layout>
		</parameter>

		<!--操作名称ActionName -->
		<parameter>
			<parameterName value="@actionname" />
			<dbType value="String" />
			<size value="100" />
			<layout type="log4net.Layout.PatternLayout">
				<conversionPattern value="%property{ActionName}" />
			</layout>
		</parameter>

		<!--IP地址 -->
		<parameter>
			<parameterName value="@ip" />
			<dbType value="String" />
			<size value="100" />
			<layout type="log4net.Layout.PatternLayout">
				<conversionPattern value="%property{IP}" />
			</layout>
		</parameter>

		<!--MAC地址 -->
		<parameter>
			<parameterName value="@mac" />
			<dbType value="String" />
			<size value="100" />
			<layout type="log4net.Layout.PatternLayout">
				<conversionPattern value="%property{MAC}" />
			</layout>
		</parameter>

		<!--机器名称MachineName -->
		<parameter>
			<parameterName value="@machinename" />
			<dbType value="String" />
			<size value="100" />
			<layout type="log4net.Layout.PatternLayout">
				<conversionPattern value="%property{MachineName}" />
			</layout>
		</parameter>
	</appender>
</log4net>